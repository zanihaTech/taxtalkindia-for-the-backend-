"use strict";var express=require("express"),bcrypt=require("bcryptjs"),jwt=require("jsonwebtoken"),Admin=require("../models/Admin"),router=express.Router();router.post("/login",function(r,s){var t,n,a,o,u;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.body,n=t.username,a=t.password,e.prev=1,e.next=4,regeneratorRuntime.awrap(Admin.findOne({username:n}));case 4:if(o=e.sent){e.next=7;break}return e.abrupt("return",s.status(400).json({message:"Invalid credentials"}));case 7:return e.next=9,regeneratorRuntime.awrap(bcrypt.compare(a,o.password));case 9:if(e.sent){e.next=12;break}return e.abrupt("return",s.status(400).json({message:"Invalid credentials"}));case 12:u=jwt.sign({id:o._id},process.env.JWT_SECRET,{expiresIn:"1h"}),s.json({token:u}),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),console.error(e.t0),s.status(500).json({message:"Server error"});case 20:case"end":return e.stop()}},null,null,[[1,16]])}),module.exports=router;
//# sourceMappingURL=authRoutes.min.js.map
